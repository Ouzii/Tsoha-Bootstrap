{% extends "base.html" %}
{% block content %}

{% if user_logged_in.admin %}

<div style="color:green"><h1>Näkymä - Työn kohteet</h1></div>
<br>
<form action="{{base_path}}/findObject" method="post">
    <input list="findWorkObject" name="description">
    <datalist id="findWorkObject">
        {% for object in objects %}
        <option value="{{object.description}}">
            {% endfor %}
    </datalist>
    <input type="submit" value="find">
</form>

{% if message != null %}
<br>
<div class="alert alert-danger">
    {{message}}
</div>
{% endif %}

<br>
<p>
    <a href="{{base_path}}/newWorkObject" class="btn btn-success">Lisää työn kohde</a>
</p>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Kuvaus</th>
            <th>Lisäyspäivä</th>
        </tr>
    </thead>

    <tbody>
        {% for object in objects %}
        <tr>
            <td><a href="{{base_path}}/workObject/{{object.id}}">{{object.description}}</a></td>
            <td>{{object.created}}</td>
        </tr>
        
        {% endfor %}
    </tbody>
</table>

{% else %}

<div style="color:green"><h1>Näkymä - Työn kohteet</h1></div>
<br>
<form action="{{base_path}}/findWorkObject" method="post">
    <input list="findWorkObject" name="description">
    <datalist id="findWorkObject">
        {% for object in objects %}
        <option value="{{object.description}}">
            {% endfor %}
    </datalist>
    <input type="submit" value="find">
</form>

{% if message != null %}
<br>
<div class="alert alert-danger">
    {{message}}
</div>
{% endif %}

<br>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Kuvaus</th>
            <th>Lisäyspäivä</th>
        </tr>
    </thead>

    <tbody>
        {% for object in objects %}
        <tr>
            <td><a href="{{base_path}}/workObject/{{object.id}}">{{object.description}}</a></td>
            <td>{{object.created}}</td>
        </tr>
        
        {% endfor %}
    </tbody>
</table>

{% endif %}

{% endblock %}